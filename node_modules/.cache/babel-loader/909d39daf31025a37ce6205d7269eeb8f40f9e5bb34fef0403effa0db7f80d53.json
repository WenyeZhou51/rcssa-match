{"ast":null,"code":"import React,{useState,useEffect}from'react';import{ThemeProvider,createTheme}from'@mui/material/styles';import{Container,CssBaseline,Paper,Typography}from'@mui/material';import axios from'axios';import UserForm from'./components/UserForm';import MatchResult from'./components/MatchResult';import WaitingMatch from'./components/WaitingMatch';// Logger utility\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const logger={debug:function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}return console.log('%c[DEBUG]','color: blue',...args);},info:function(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}return console.log('%c[INFO]','color: green',...args);},warn:function(){for(var _len3=arguments.length,args=new Array(_len3),_key3=0;_key3<_len3;_key3++){args[_key3]=arguments[_key3];}return console.log('%c[WARN]','color: orange',...args);},error:function(){for(var _len4=arguments.length,args=new Array(_len4),_key4=0;_key4<_len4;_key4++){args[_key4]=arguments[_key4];}return console.log('%c[ERROR]','color: red',...args);}};const theme=createTheme({palette:{primary:{main:'#1976d2'},secondary:{main:'#dc004e'},background:{default:'#f5f5f5'}},typography:{fontFamily:'\"Roboto\", \"Helvetica\", \"Arial\", sans-serif'}});// Use environment variable for API URL, fallback to localhost for development\nconst API_BASE_URL=process.env.REACT_APP_API_URL||'http://localhost:5000/api';logger.info('Using API URL:',API_BASE_URL);function App(){const[matchData,setMatchData]=useState(null);const[userId,setUserId]=useState(null);const[isWaiting,setIsWaiting]=useState(false);const[error,setError]=useState(null);useEffect(()=>{let pollInterval;if(userId&&isWaiting){logger.info('Starting polling for match with userId:',userId);pollInterval=setInterval(async()=>{try{logger.debug('Polling for match...');const response=await axios.get(`${API_BASE_URL}/users/${userId}/match`);logger.debug('Poll response:',response.data);if(response.data.matched){logger.info('Match found during polling:',response.data.match);setMatchData({...matchData,match:response.data.match});setIsWaiting(false);}// Clear any previous errors on successful request\nsetError(null);}catch(error){var _error$response,_error$response2;logger.error('Error polling for match:',error);logger.debug('Error details:',{status:(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status,data:(_error$response2=error.response)===null||_error$response2===void 0?void 0:_error$response2.data,message:error.message});setError('Unable to check for matches. Please try again later.');}},5000);// Poll every 5 seconds\n}return()=>{if(pollInterval){logger.debug('Cleaning up poll interval');clearInterval(pollInterval);}};},[userId,isWaiting,matchData]);const handleFormSubmit=async formData=>{logger.info('Submitting form data');logger.debug('Form data:',formData);try{setError(null);logger.debug('Making POST request to:',`${API_BASE_URL}/users`);const response=await axios.post(`${API_BASE_URL}/users`,formData);logger.debug('Server response:',response.data);if(response.data.matched){logger.info('Immediate match found');setMatchData({...response.data.user,match:response.data.match});}else{logger.info('No immediate match, entering waiting state');setUserId(response.data.user._id);setMatchData(response.data.user);setIsWaiting(true);}}catch(error){var _error$response3,_error$response4;logger.error('Error submitting form:',error);logger.debug('Error details:',{status:(_error$response3=error.response)===null||_error$response3===void 0?void 0:_error$response3.status,data:(_error$response4=error.response)===null||_error$response4===void 0?void 0:_error$response4.data,message:error.message,stack:error.stack});setError('Unable to submit your information. Please try again.');}};const renderContent=()=>{if(error){logger.warn('Rendering error state:',error);return/*#__PURE__*/_jsx(Paper,{elevation:3,sx:{p:4,borderRadius:2},children:/*#__PURE__*/_jsx(Typography,{color:\"error\",align:\"center\",variant:\"h6\",children:error})});}if(!matchData){logger.debug('Rendering initial form state');return/*#__PURE__*/_jsx(UserForm,{onSubmit:handleFormSubmit});}if(isWaiting){logger.debug('Rendering waiting state');return/*#__PURE__*/_jsx(WaitingMatch,{});}logger.debug('Rendering match result state');return/*#__PURE__*/_jsx(MatchResult,{userData:matchData});};return/*#__PURE__*/_jsxs(ThemeProvider,{theme:theme,children:[/*#__PURE__*/_jsx(CssBaseline,{}),/*#__PURE__*/_jsx(Container,{component:\"main\",maxWidth:\"sm\",sx:{pt:8},children:renderContent()})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","ThemeProvider","createTheme","Container","CssBaseline","Paper","Typography","axios","UserForm","MatchResult","WaitingMatch","jsx","_jsx","jsxs","_jsxs","logger","debug","_len","arguments","length","args","Array","_key","console","log","info","_len2","_key2","warn","_len3","_key3","error","_len4","_key4","theme","palette","primary","main","secondary","background","default","typography","fontFamily","API_BASE_URL","process","env","REACT_APP_API_URL","App","matchData","setMatchData","userId","setUserId","isWaiting","setIsWaiting","setError","pollInterval","setInterval","response","get","data","matched","match","_error$response","_error$response2","status","message","clearInterval","handleFormSubmit","formData","post","user","_id","_error$response3","_error$response4","stack","renderContent","elevation","sx","p","borderRadius","children","color","align","variant","onSubmit","userData","component","maxWidth","pt"],"sources":["E:/RCSSA Match/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { ThemeProvider, createTheme } from '@mui/material/styles';\nimport { Container, CssBaseline, Paper, Typography } from '@mui/material';\nimport axios from 'axios';\nimport UserForm from './components/UserForm';\nimport MatchResult from './components/MatchResult';\nimport WaitingMatch from './components/WaitingMatch';\n\n// Logger utility\nconst logger = {\n  debug: (...args) => console.log('%c[DEBUG]', 'color: blue', ...args),\n  info: (...args) => console.log('%c[INFO]', 'color: green', ...args),\n  warn: (...args) => console.log('%c[WARN]', 'color: orange', ...args),\n  error: (...args) => console.log('%c[ERROR]', 'color: red', ...args)\n};\n\nconst theme = createTheme({\n  palette: {\n    primary: {\n      main: '#1976d2',\n    },\n    secondary: {\n      main: '#dc004e',\n    },\n    background: {\n      default: '#f5f5f5',\n    },\n  },\n  typography: {\n    fontFamily: '\"Roboto\", \"Helvetica\", \"Arial\", sans-serif',\n  },\n});\n\n// Use environment variable for API URL, fallback to localhost for development\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\nlogger.info('Using API URL:', API_BASE_URL);\n\nfunction App() {\n  const [matchData, setMatchData] = useState(null);\n  const [userId, setUserId] = useState(null);\n  const [isWaiting, setIsWaiting] = useState(false);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    let pollInterval;\n    \n    if (userId && isWaiting) {\n      logger.info('Starting polling for match with userId:', userId);\n      pollInterval = setInterval(async () => {\n        try {\n          logger.debug('Polling for match...');\n          const response = await axios.get(`${API_BASE_URL}/users/${userId}/match`);\n          logger.debug('Poll response:', response.data);\n          \n          if (response.data.matched) {\n            logger.info('Match found during polling:', response.data.match);\n            setMatchData({\n              ...matchData,\n              match: response.data.match\n            });\n            setIsWaiting(false);\n          }\n          // Clear any previous errors on successful request\n          setError(null);\n        } catch (error) {\n          logger.error('Error polling for match:', error);\n          logger.debug('Error details:', {\n            status: error.response?.status,\n            data: error.response?.data,\n            message: error.message\n          });\n          setError('Unable to check for matches. Please try again later.');\n        }\n      }, 5000); // Poll every 5 seconds\n    }\n\n    return () => {\n      if (pollInterval) {\n        logger.debug('Cleaning up poll interval');\n        clearInterval(pollInterval);\n      }\n    };\n  }, [userId, isWaiting, matchData]);\n\n  const handleFormSubmit = async (formData) => {\n    logger.info('Submitting form data');\n    logger.debug('Form data:', formData);\n    \n    try {\n      setError(null);\n      logger.debug('Making POST request to:', `${API_BASE_URL}/users`);\n      const response = await axios.post(`${API_BASE_URL}/users`, formData);\n      logger.debug('Server response:', response.data);\n      \n      if (response.data.matched) {\n        logger.info('Immediate match found');\n        setMatchData({\n          ...response.data.user,\n          match: response.data.match\n        });\n      } else {\n        logger.info('No immediate match, entering waiting state');\n        setUserId(response.data.user._id);\n        setMatchData(response.data.user);\n        setIsWaiting(true);\n      }\n    } catch (error) {\n      logger.error('Error submitting form:', error);\n      logger.debug('Error details:', {\n        status: error.response?.status,\n        data: error.response?.data,\n        message: error.message,\n        stack: error.stack\n      });\n      setError('Unable to submit your information. Please try again.');\n    }\n  };\n\n  const renderContent = () => {\n    if (error) {\n      logger.warn('Rendering error state:', error);\n      return (\n        <Paper elevation={3} sx={{ p: 4, borderRadius: 2 }}>\n          <Typography color=\"error\" align=\"center\" variant=\"h6\">\n            {error}\n          </Typography>\n        </Paper>\n      );\n    }\n    \n    if (!matchData) {\n      logger.debug('Rendering initial form state');\n      return <UserForm onSubmit={handleFormSubmit} />;\n    }\n    if (isWaiting) {\n      logger.debug('Rendering waiting state');\n      return <WaitingMatch />;\n    }\n    logger.debug('Rendering match result state');\n    return <MatchResult userData={matchData} />;\n  };\n\n  return (\n    <ThemeProvider theme={theme}>\n      <CssBaseline />\n      <Container component=\"main\" maxWidth=\"sm\" sx={{ pt: 8 }}>\n        {renderContent()}\n      </Container>\n    </ThemeProvider>\n  );\n}\n\nexport default App; "],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,aAAa,CAAEC,WAAW,KAAQ,sBAAsB,CACjE,OAASC,SAAS,CAAEC,WAAW,CAAEC,KAAK,CAAEC,UAAU,KAAQ,eAAe,CACzE,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,QAAQ,KAAM,uBAAuB,CAC5C,MAAO,CAAAC,WAAW,KAAM,0BAA0B,CAClD,MAAO,CAAAC,YAAY,KAAM,2BAA2B,CAEpD;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBACA,KAAM,CAAAC,MAAM,CAAG,CACbC,KAAK,CAAE,QAAAA,CAAA,UAAAC,IAAA,CAAAC,SAAA,CAAAC,MAAA,CAAIC,IAAI,KAAAC,KAAA,CAAAJ,IAAA,EAAAK,IAAA,GAAAA,IAAA,CAAAL,IAAA,CAAAK,IAAA,IAAJF,IAAI,CAAAE,IAAA,EAAAJ,SAAA,CAAAI,IAAA,SAAK,CAAAC,OAAO,CAACC,GAAG,CAAC,WAAW,CAAE,aAAa,CAAE,GAAGJ,IAAI,CAAC,GACpEK,IAAI,CAAE,QAAAA,CAAA,UAAAC,KAAA,CAAAR,SAAA,CAAAC,MAAA,CAAIC,IAAI,KAAAC,KAAA,CAAAK,KAAA,EAAAC,KAAA,GAAAA,KAAA,CAAAD,KAAA,CAAAC,KAAA,IAAJP,IAAI,CAAAO,KAAA,EAAAT,SAAA,CAAAS,KAAA,SAAK,CAAAJ,OAAO,CAACC,GAAG,CAAC,UAAU,CAAE,cAAc,CAAE,GAAGJ,IAAI,CAAC,GACnEQ,IAAI,CAAE,QAAAA,CAAA,UAAAC,KAAA,CAAAX,SAAA,CAAAC,MAAA,CAAIC,IAAI,KAAAC,KAAA,CAAAQ,KAAA,EAAAC,KAAA,GAAAA,KAAA,CAAAD,KAAA,CAAAC,KAAA,IAAJV,IAAI,CAAAU,KAAA,EAAAZ,SAAA,CAAAY,KAAA,SAAK,CAAAP,OAAO,CAACC,GAAG,CAAC,UAAU,CAAE,eAAe,CAAE,GAAGJ,IAAI,CAAC,GACpEW,KAAK,CAAE,QAAAA,CAAA,UAAAC,KAAA,CAAAd,SAAA,CAAAC,MAAA,CAAIC,IAAI,KAAAC,KAAA,CAAAW,KAAA,EAAAC,KAAA,GAAAA,KAAA,CAAAD,KAAA,CAAAC,KAAA,IAAJb,IAAI,CAAAa,KAAA,EAAAf,SAAA,CAAAe,KAAA,SAAK,CAAAV,OAAO,CAACC,GAAG,CAAC,WAAW,CAAE,YAAY,CAAE,GAAGJ,IAAI,CAAC,EACrE,CAAC,CAED,KAAM,CAAAc,KAAK,CAAGhC,WAAW,CAAC,CACxBiC,OAAO,CAAE,CACPC,OAAO,CAAE,CACPC,IAAI,CAAE,SACR,CAAC,CACDC,SAAS,CAAE,CACTD,IAAI,CAAE,SACR,CAAC,CACDE,UAAU,CAAE,CACVC,OAAO,CAAE,SACX,CACF,CAAC,CACDC,UAAU,CAAE,CACVC,UAAU,CAAE,4CACd,CACF,CAAC,CAAC,CAEF;AACA,KAAM,CAAAC,YAAY,CAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,EAAI,2BAA2B,CACjF/B,MAAM,CAACU,IAAI,CAAC,gBAAgB,CAAEkB,YAAY,CAAC,CAE3C,QAAS,CAAAI,GAAGA,CAAA,CAAG,CACb,KAAM,CAACC,SAAS,CAAEC,YAAY,CAAC,CAAGlD,QAAQ,CAAC,IAAI,CAAC,CAChD,KAAM,CAACmD,MAAM,CAAEC,SAAS,CAAC,CAAGpD,QAAQ,CAAC,IAAI,CAAC,CAC1C,KAAM,CAACqD,SAAS,CAAEC,YAAY,CAAC,CAAGtD,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAACgC,KAAK,CAAEuB,QAAQ,CAAC,CAAGvD,QAAQ,CAAC,IAAI,CAAC,CAExCC,SAAS,CAAC,IAAM,CACd,GAAI,CAAAuD,YAAY,CAEhB,GAAIL,MAAM,EAAIE,SAAS,CAAE,CACvBrC,MAAM,CAACU,IAAI,CAAC,yCAAyC,CAAEyB,MAAM,CAAC,CAC9DK,YAAY,CAAGC,WAAW,CAAC,SAAY,CACrC,GAAI,CACFzC,MAAM,CAACC,KAAK,CAAC,sBAAsB,CAAC,CACpC,KAAM,CAAAyC,QAAQ,CAAG,KAAM,CAAAlD,KAAK,CAACmD,GAAG,CAAC,GAAGf,YAAY,UAAUO,MAAM,QAAQ,CAAC,CACzEnC,MAAM,CAACC,KAAK,CAAC,gBAAgB,CAAEyC,QAAQ,CAACE,IAAI,CAAC,CAE7C,GAAIF,QAAQ,CAACE,IAAI,CAACC,OAAO,CAAE,CACzB7C,MAAM,CAACU,IAAI,CAAC,6BAA6B,CAAEgC,QAAQ,CAACE,IAAI,CAACE,KAAK,CAAC,CAC/DZ,YAAY,CAAC,CACX,GAAGD,SAAS,CACZa,KAAK,CAAEJ,QAAQ,CAACE,IAAI,CAACE,KACvB,CAAC,CAAC,CACFR,YAAY,CAAC,KAAK,CAAC,CACrB,CACA;AACAC,QAAQ,CAAC,IAAI,CAAC,CAChB,CAAE,MAAOvB,KAAK,CAAE,KAAA+B,eAAA,CAAAC,gBAAA,CACdhD,MAAM,CAACgB,KAAK,CAAC,0BAA0B,CAAEA,KAAK,CAAC,CAC/ChB,MAAM,CAACC,KAAK,CAAC,gBAAgB,CAAE,CAC7BgD,MAAM,EAAAF,eAAA,CAAE/B,KAAK,CAAC0B,QAAQ,UAAAK,eAAA,iBAAdA,eAAA,CAAgBE,MAAM,CAC9BL,IAAI,EAAAI,gBAAA,CAAEhC,KAAK,CAAC0B,QAAQ,UAAAM,gBAAA,iBAAdA,gBAAA,CAAgBJ,IAAI,CAC1BM,OAAO,CAAElC,KAAK,CAACkC,OACjB,CAAC,CAAC,CACFX,QAAQ,CAAC,sDAAsD,CAAC,CAClE,CACF,CAAC,CAAE,IAAI,CAAC,CAAE;AACZ,CAEA,MAAO,IAAM,CACX,GAAIC,YAAY,CAAE,CAChBxC,MAAM,CAACC,KAAK,CAAC,2BAA2B,CAAC,CACzCkD,aAAa,CAACX,YAAY,CAAC,CAC7B,CACF,CAAC,CACH,CAAC,CAAE,CAACL,MAAM,CAAEE,SAAS,CAAEJ,SAAS,CAAC,CAAC,CAElC,KAAM,CAAAmB,gBAAgB,CAAG,KAAO,CAAAC,QAAQ,EAAK,CAC3CrD,MAAM,CAACU,IAAI,CAAC,sBAAsB,CAAC,CACnCV,MAAM,CAACC,KAAK,CAAC,YAAY,CAAEoD,QAAQ,CAAC,CAEpC,GAAI,CACFd,QAAQ,CAAC,IAAI,CAAC,CACdvC,MAAM,CAACC,KAAK,CAAC,yBAAyB,CAAE,GAAG2B,YAAY,QAAQ,CAAC,CAChE,KAAM,CAAAc,QAAQ,CAAG,KAAM,CAAAlD,KAAK,CAAC8D,IAAI,CAAC,GAAG1B,YAAY,QAAQ,CAAEyB,QAAQ,CAAC,CACpErD,MAAM,CAACC,KAAK,CAAC,kBAAkB,CAAEyC,QAAQ,CAACE,IAAI,CAAC,CAE/C,GAAIF,QAAQ,CAACE,IAAI,CAACC,OAAO,CAAE,CACzB7C,MAAM,CAACU,IAAI,CAAC,uBAAuB,CAAC,CACpCwB,YAAY,CAAC,CACX,GAAGQ,QAAQ,CAACE,IAAI,CAACW,IAAI,CACrBT,KAAK,CAAEJ,QAAQ,CAACE,IAAI,CAACE,KACvB,CAAC,CAAC,CACJ,CAAC,IAAM,CACL9C,MAAM,CAACU,IAAI,CAAC,4CAA4C,CAAC,CACzD0B,SAAS,CAACM,QAAQ,CAACE,IAAI,CAACW,IAAI,CAACC,GAAG,CAAC,CACjCtB,YAAY,CAACQ,QAAQ,CAACE,IAAI,CAACW,IAAI,CAAC,CAChCjB,YAAY,CAAC,IAAI,CAAC,CACpB,CACF,CAAE,MAAOtB,KAAK,CAAE,KAAAyC,gBAAA,CAAAC,gBAAA,CACd1D,MAAM,CAACgB,KAAK,CAAC,wBAAwB,CAAEA,KAAK,CAAC,CAC7ChB,MAAM,CAACC,KAAK,CAAC,gBAAgB,CAAE,CAC7BgD,MAAM,EAAAQ,gBAAA,CAAEzC,KAAK,CAAC0B,QAAQ,UAAAe,gBAAA,iBAAdA,gBAAA,CAAgBR,MAAM,CAC9BL,IAAI,EAAAc,gBAAA,CAAE1C,KAAK,CAAC0B,QAAQ,UAAAgB,gBAAA,iBAAdA,gBAAA,CAAgBd,IAAI,CAC1BM,OAAO,CAAElC,KAAK,CAACkC,OAAO,CACtBS,KAAK,CAAE3C,KAAK,CAAC2C,KACf,CAAC,CAAC,CACFpB,QAAQ,CAAC,sDAAsD,CAAC,CAClE,CACF,CAAC,CAED,KAAM,CAAAqB,aAAa,CAAGA,CAAA,GAAM,CAC1B,GAAI5C,KAAK,CAAE,CACThB,MAAM,CAACa,IAAI,CAAC,wBAAwB,CAAEG,KAAK,CAAC,CAC5C,mBACEnB,IAAA,CAACP,KAAK,EAACuE,SAAS,CAAE,CAAE,CAACC,EAAE,CAAE,CAAEC,CAAC,CAAE,CAAC,CAAEC,YAAY,CAAE,CAAE,CAAE,CAAAC,QAAA,cACjDpE,IAAA,CAACN,UAAU,EAAC2E,KAAK,CAAC,OAAO,CAACC,KAAK,CAAC,QAAQ,CAACC,OAAO,CAAC,IAAI,CAAAH,QAAA,CAClDjD,KAAK,CACI,CAAC,CACR,CAAC,CAEZ,CAEA,GAAI,CAACiB,SAAS,CAAE,CACdjC,MAAM,CAACC,KAAK,CAAC,8BAA8B,CAAC,CAC5C,mBAAOJ,IAAA,CAACJ,QAAQ,EAAC4E,QAAQ,CAAEjB,gBAAiB,CAAE,CAAC,CACjD,CACA,GAAIf,SAAS,CAAE,CACbrC,MAAM,CAACC,KAAK,CAAC,yBAAyB,CAAC,CACvC,mBAAOJ,IAAA,CAACF,YAAY,GAAE,CAAC,CACzB,CACAK,MAAM,CAACC,KAAK,CAAC,8BAA8B,CAAC,CAC5C,mBAAOJ,IAAA,CAACH,WAAW,EAAC4E,QAAQ,CAAErC,SAAU,CAAE,CAAC,CAC7C,CAAC,CAED,mBACElC,KAAA,CAACb,aAAa,EAACiC,KAAK,CAAEA,KAAM,CAAA8C,QAAA,eAC1BpE,IAAA,CAACR,WAAW,GAAE,CAAC,cACfQ,IAAA,CAACT,SAAS,EAACmF,SAAS,CAAC,MAAM,CAACC,QAAQ,CAAC,IAAI,CAACV,EAAE,CAAE,CAAEW,EAAE,CAAE,CAAE,CAAE,CAAAR,QAAA,CACrDL,aAAa,CAAC,CAAC,CACP,CAAC,EACC,CAAC,CAEpB,CAEA,cAAe,CAAA5B,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}