{"ast":null,"code":"import React,{useState,useEffect}from'react';import{ThemeProvider,createTheme}from'@mui/material/styles';import{Container,CssBaseline,Paper,Typography}from'@mui/material';import axios from'axios';import UserForm from'./components/UserForm';import MatchResult from'./components/MatchResult';import WaitingMatch from'./components/WaitingMatch';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const theme=createTheme({palette:{primary:{main:'#1976d2'},secondary:{main:'#dc004e'},background:{default:'#f5f5f5'}},typography:{fontFamily:'\"Roboto\", \"Helvetica\", \"Arial\", sans-serif'}});// Use environment variable for API URL, fallback to localhost for development\nconst API_BASE_URL=process.env.REACT_APP_API_URL||'http://localhost:5000/api';function App(){const[matchData,setMatchData]=useState(null);const[userId,setUserId]=useState(null);const[isWaiting,setIsWaiting]=useState(false);const[error,setError]=useState(null);useEffect(()=>{let pollInterval;if(userId&&isWaiting){pollInterval=setInterval(async()=>{try{const response=await axios.get(`${API_BASE_URL}/users/${userId}/match`);if(response.data.matched){setMatchData({...matchData,match:response.data.match});setIsWaiting(false);}// Clear any previous errors on successful request\nsetError(null);}catch(error){console.error('Error polling for match:',error);setError('Unable to check for matches. Please try again later.');}},5000);// Poll every 5 seconds\n}return()=>{if(pollInterval){clearInterval(pollInterval);}};},[userId,isWaiting,matchData]);const handleFormSubmit=async formData=>{try{setError(null);const response=await axios.post(`${API_BASE_URL}/users`,formData);if(response.data.matched){setMatchData({...response.data.user,match:response.data.match});}else{setUserId(response.data.user._id);setMatchData(response.data.user);setIsWaiting(true);}}catch(error){console.error('Error submitting form:',error);setError('Unable to submit your information. Please try again.');}};const renderContent=()=>{if(error){return/*#__PURE__*/_jsx(Paper,{elevation:3,sx:{p:4,borderRadius:2},children:/*#__PURE__*/_jsx(Typography,{color:\"error\",align:\"center\",variant:\"h6\",children:error})});}if(!matchData){return/*#__PURE__*/_jsx(UserForm,{onSubmit:handleFormSubmit});}if(isWaiting){return/*#__PURE__*/_jsx(WaitingMatch,{});}return/*#__PURE__*/_jsx(MatchResult,{userData:matchData});};return/*#__PURE__*/_jsxs(ThemeProvider,{theme:theme,children:[/*#__PURE__*/_jsx(CssBaseline,{}),/*#__PURE__*/_jsx(Container,{component:\"main\",maxWidth:\"sm\",sx:{pt:8},children:renderContent()})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","ThemeProvider","createTheme","Container","CssBaseline","Paper","Typography","axios","UserForm","MatchResult","WaitingMatch","jsx","_jsx","jsxs","_jsxs","theme","palette","primary","main","secondary","background","default","typography","fontFamily","API_BASE_URL","process","env","REACT_APP_API_URL","App","matchData","setMatchData","userId","setUserId","isWaiting","setIsWaiting","error","setError","pollInterval","setInterval","response","get","data","matched","match","console","clearInterval","handleFormSubmit","formData","post","user","_id","renderContent","elevation","sx","p","borderRadius","children","color","align","variant","onSubmit","userData","component","maxWidth","pt"],"sources":["E:/RCSSA Match/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { ThemeProvider, createTheme } from '@mui/material/styles';\r\nimport { Container, CssBaseline, Paper, Typography } from '@mui/material';\r\nimport axios from 'axios';\r\nimport UserForm from './components/UserForm';\r\nimport MatchResult from './components/MatchResult';\r\nimport WaitingMatch from './components/WaitingMatch';\r\n\r\nconst theme = createTheme({\r\n  palette: {\r\n    primary: {\r\n      main: '#1976d2',\r\n    },\r\n    secondary: {\r\n      main: '#dc004e',\r\n    },\r\n    background: {\r\n      default: '#f5f5f5',\r\n    },\r\n  },\r\n  typography: {\r\n    fontFamily: '\"Roboto\", \"Helvetica\", \"Arial\", sans-serif',\r\n  },\r\n});\r\n\r\n// Use environment variable for API URL, fallback to localhost for development\r\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\r\n\r\nfunction App() {\r\n  const [matchData, setMatchData] = useState(null);\r\n  const [userId, setUserId] = useState(null);\r\n  const [isWaiting, setIsWaiting] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    let pollInterval;\r\n    \r\n    if (userId && isWaiting) {\r\n      pollInterval = setInterval(async () => {\r\n        try {\r\n          const response = await axios.get(`${API_BASE_URL}/users/${userId}/match`);\r\n          if (response.data.matched) {\r\n            setMatchData({\r\n              ...matchData,\r\n              match: response.data.match\r\n            });\r\n            setIsWaiting(false);\r\n          }\r\n          // Clear any previous errors on successful request\r\n          setError(null);\r\n        } catch (error) {\r\n          console.error('Error polling for match:', error);\r\n          setError('Unable to check for matches. Please try again later.');\r\n        }\r\n      }, 5000); // Poll every 5 seconds\r\n    }\r\n\r\n    return () => {\r\n      if (pollInterval) {\r\n        clearInterval(pollInterval);\r\n      }\r\n    };\r\n  }, [userId, isWaiting, matchData]);\r\n\r\n  const handleFormSubmit = async (formData) => {\r\n    try {\r\n      setError(null);\r\n      const response = await axios.post(`${API_BASE_URL}/users`, formData);\r\n      \r\n      if (response.data.matched) {\r\n        setMatchData({\r\n          ...response.data.user,\r\n          match: response.data.match\r\n        });\r\n      } else {\r\n        setUserId(response.data.user._id);\r\n        setMatchData(response.data.user);\r\n        setIsWaiting(true);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error submitting form:', error);\r\n      setError('Unable to submit your information. Please try again.');\r\n    }\r\n  };\r\n\r\n  const renderContent = () => {\r\n    if (error) {\r\n      return (\r\n        <Paper elevation={3} sx={{ p: 4, borderRadius: 2 }}>\r\n          <Typography color=\"error\" align=\"center\" variant=\"h6\">\r\n            {error}\r\n          </Typography>\r\n        </Paper>\r\n      );\r\n    }\r\n    \r\n    if (!matchData) {\r\n      return <UserForm onSubmit={handleFormSubmit} />;\r\n    }\r\n    if (isWaiting) {\r\n      return <WaitingMatch />;\r\n    }\r\n    return <MatchResult userData={matchData} />;\r\n  };\r\n\r\n  return (\r\n    <ThemeProvider theme={theme}>\r\n      <CssBaseline />\r\n      <Container component=\"main\" maxWidth=\"sm\" sx={{ pt: 8 }}>\r\n        {renderContent()}\r\n      </Container>\r\n    </ThemeProvider>\r\n  );\r\n}\r\n\r\nexport default App; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}